parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"or4r":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],e="Expected a function",n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,f=/^0o[0-7]+$/i,c=parseInt,a="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,v=a||s||Function("return this")(),l=Object.prototype,p=l.toString,b=Math.max,m=Math.min,y=function(){return v.Date.now()};function d(t,n,r){var i,o,u,f,c,a,s=0,v=!1,l=!1,p=!0;if("function"!=typeof t)throw new TypeError(e);function d(e){var n=i,r=o;return i=o=void 0,s=e,f=t.apply(r,n)}function g(t){var e=t-a;return void 0===a||e>=n||e<0||l&&t-s>=u}function O(){var t=y();if(g(t))return x(t);c=setTimeout(O,function(t){var e=n-(t-a);return l?m(e,u-(t-s)):e}(t))}function x(t){return c=void 0,p&&i?d(t):(i=o=void 0,f)}function T(){var t=y(),e=g(t);if(i=arguments,o=this,a=t,e){if(void 0===c)return function(t){return s=t,c=setTimeout(O,n),v?d(t):f}(a);if(l)return c=setTimeout(O,n),d(a)}return void 0===c&&(c=setTimeout(O,n)),f}return n=h(n)||0,j(r)&&(v=!!r.leading,u=(l="maxWait"in r)?b(h(r.maxWait)||0,n):u,p="trailing"in r?!!r.trailing:p),T.cancel=function(){void 0!==c&&clearTimeout(c),s=0,i=a=o=c=void 0},T.flush=function(){return void 0===c?f:x(y())},T}function j(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){return!!t&&"object"==typeof t}function O(t){return"symbol"==typeof t||g(t)&&p.call(t)==r}function h(t){if("number"==typeof t)return t;if(O(t))return n;if(j(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=j(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var r=u.test(t);return r||f.test(t)?c(t.slice(2),r?2:8):o.test(t)?n:+t}module.exports=d;
},{}],"WEtf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}},e=r;exports.default=e;
},{}],"hZBy":[function(require,module,exports) {
"use strict";function e(e){return r(e)||n(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function r(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function o(e){return document.querySelector(e)}function s(t){return e((arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(t))}function c(t,n){return e(t.querySelectorAll(n))}function a(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)".concat(t.split(" ").join("|"),"(\\b|$)"),"gi")," ")}function l(e,t){e.classList?e.classList.add(t):e.className="".concat(e.className," ").concat(t)}function i(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )".concat(t,"( |$)"),"gi").test(e.className)}function u(e,t){t=t||0;var n=e.getBoundingClientRect().top+t,r=(window.pageYOffset||document.documentElement.scrollTop)+n;window.scrollTo(0,r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.select=o,exports.selectAll=s,exports.find=c,exports.removeClass=a,exports.addClass=l,exports.hasClass=i,exports.jumpTo=u;
},{}],"U9xJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("./dom");function t(){(0,e.selectAll)("[target='_blank']").forEach(function(e){return e.setAttribute("rel","noopener")})}
},{"./dom":"hZBy"}],"b9Lb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=[{quizID:1,main:10,exact:[6,7,8,9,10]},{quizID:2,main:13,exact:[3,11,12,13]},{quizID:3,main:null,exact:[]},{quizID:4,main:12,exact:[0,1,2,4,9,12]},{quizID:5,main:5,exact:[5]}];exports.default=e;
},{}],"qa0R":[function(require,module,exports) {
"use strict";function e(e){if(!e.size())return!1;var t=e.html().split(" ").map(function(e,t){return"<span data-index=".concat(t,">").concat(e,"</span>")}).join(" ");return e.html(t),!0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={prepare:e};exports.default=t;
},{}],"xZJw":[function(require,module,exports) {
"use strict";function t(t){return new Promise(function(e,n){var r=t.split(".").pop();"csv"===r?d3.csv("assets/data/".concat(t)).then(e).catch(n):"json"===r?d3.json("assets/data/".concat(t)).then(e).catch(n):n(new Error("unsupported file type for: ".concat(t)))})}function e(e){if("string"==typeof e)return t(e);var n=e.map(t);return Promise.all(n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"MBJX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./load-data"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(n,!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=null,o=[],i=[],s=d3.select(".first-select"),l=d3.select("#slide_18").select(".compare-wrapper");function u(e){return e.map(function(e){return n({},e,{category:a.get(e.word)})})}function p(){var e=d3.select(this).select("input"),t=e.attr("checked"),r=d3.select(this.parentNode),n=d3.select(r.node().parentNode),c=d3.select(n.node().parentNode),a=c.select(".origLyric");console.log({parent:parent,lyrics:a,lyricParent:c,checked:t}),"true"===t?a.text(function(e){return e.original}):a.text(function(e){return e.kb}),console.log({thisSwitch:e,checked:t}),"true"===e.attr("checked")?e.attr("checked","false"):e.attr("checked","true")}function d(e){var t=i.filter(function(t){return t.key===e})[0].values;l.selectAll(".lyric-set").data(t,function(e){return e?e.word:null}).join(function(e){var t=e.append("div").attr("class","lyric-set"),r=t.append("div").attr("class","lyric-head");t.append("p").attr("class","origLyric").text(function(e){return e.kb});var n=r.append("div").attr("class","deets");n.append("p").attr("class","song").text(function(e){return e.song}),n.append("p").attr("class","kb-deets").text(function(e){return e.kb_deets}),n.append("p").attr("class","orig-deets").text(function(e){return e.original_deets});var c=r.append("div").attr("class","toggle");c.append("p").attr("class","toggle-labels toggle-on").text("Kidz Bop");var a=c.append("label").attr("class","switch");a.append("input").attr("type","checkbox").attr("class","is-kb").attr("checked","false"),a.append("span").attr("class","slider round"),a.on("change",p),c.append("p").attr("class","toggle-labels").text("Original")})}function f(){s.selectAll("option").data(i,function(e){return e.key}).join(function(e){return e.append("option").text(function(e){return e.key}).attr("value",function(e){return e.key})}),s.on("change",function(){d(d3.select(this).property("value"))})}function g(e){var t=o.filter(function(t){return t.category===e});(i=d3.nest().key(function(e){return e.word}).entries(t))&&(f(),d(i[0].key))}function y(){}function v(){(0,e.default)(["cat_crosswalk.csv","cat_lyrics.csv"]).then(function(e){var t=e[0].map(function(e){return[e.word,e.category]});a=new Map(t),o=u(e[1])}).catch(console.error)}var b={init:v,resize:y,filter:g};exports.default=b;
},{"./load-data":"xZJw"}],"TAPd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("./lyrics")),t=l(require("./utils/prepare-span")),s=l(require("./categories"));function l(e){return e&&e.__esModule?e:{default:e}}function a(){}var i=d3.selectAll(".slide"),n=d3.select("#touch"),r=n.selectAll("#right"),c=n.selectAll("#left"),o=n.selectAll("#skipper"),d=d3.selectAll(".category-bar"),u=d3.selectAll(".song-circle"),f=i.filter(function(e,t,s){return d3.select(s[t]).attr("data-quiz")}),p=d3.selectAll("#count"),v=d3.select(".quiz-details"),b=d3.select("#categories"),g=null,h=null,y=null,A=null,x=null,z=null;function q(){f.nodes().forEach(function(e){var s=d3.select(e).select(".lyric-wrapper p");t.default.prepare(s)}),g=d3.selectAll(".lyric-wrapper span")}function w(){h=d3.select(".is-visible-slide");var e=(y=+h.attr("data-slide"))>=3&&(y+1)%2!=0;A=i.filter(function(e,t,s){return d3.select(s[t]).attr("data-slide")==="".concat(y-1)}),x=i.filter(function(e,t,s){return d3.select(s[t]).attr("data-slide")==="".concat(y+1)}),17==y&&d3.select("#categories").classed("is-visible",!0),e&&(z=i.filter(function(e,t,s){return d3.select(s[t]).attr("data-slide")==="".concat(y-1)})),P()}function k(){i.attr("data-slide",function(e,t){return t+1}),w()}function m(t){var s=z.selectAll("span"),l=z.selectAll(".censored"),a=z.attr("data-quiz"),i=e.default.filter(function(e){return e.quizID===+a})[0],n=i.exact.filter(function(e){return!t.includes(e)}),r=t.filter(function(e){return!i.exact.includes(e)}),c=s.size()===l.size(),o=u.filter(function(e,t,s){return d3.select(s[t]).attr("data-quiz")===a});c?o.classed("is-wrong",!0).classed("is-correct",!1):0===n.length&&0===r.length?o.classed("is-correct",!0).classed("is-wrong",!1):n.length>0&&t.includes(i.main)?o.classed("is-correct",!0).classed("is-wrong",!1):o.classed("is-wrong",!0).classed("is-correct",!1)}function L(){var e=z.selectAll(".censored"),t=[];e.each(function(){var e=d3.select(this).attr("data-index");t.push(+e)}),m(t)}function S(){var e=d3.select(this),t=e.classed("censored");e.classed("censored",!t)}function _(){d3.selectAll("#left").classed("is-visible",!1),d3.selectAll("#right").classed("solo",!0)}function C(){var e=v.selectAll(".is-correct").size();d3.select(".correct-count").text(e)}function P(){var e=d3.selectAll("#left"),t=d3.selectAll("#right"),s=t.select("button p"),l=h.attr("data-quiz")||h.attr("data-answer")||13===y;2===y?s.text("Take the quiz"):h.attr("data-quiz")?s.text("Submit"):h.attr("data-answer")&&12!==y?s.text("Next Song"):12===y?s.text("Show my results"):13===y&&s.text("Tell me more"),o.classed("is-visible",2===y),e.classed("is-visible",[14,15,16].includes(y)),t.classed("is-visible",![17,18].includes(y)),t.classed("solo",y<=13),v.classed("is-visible",l),h.attr("data-quiz")&&p.text(h.attr("data-quiz")),13===y&&(C(),v.classed("total",!0)),y>16?(console.log({$touch:n}),n.style("pointer-events","none")):n.style("pointer-events","all")}function T(){console.log({$currSlide:h});var e=h.attr("data-quiz");h.classed("is-visible-slide",!1),x.classed("is-visible-slide",!0),w(),e&&L()}function M(){h.classed("is-visible-slide",!1),A.classed("is-visible-slide",!0),w()}function N(){i.classed("is-visible-slide",!1),d3.select('[data-chart="bar"]').classed("is-visible-slide",!0),w()}function $(e){var t=e.select("p"),s=e.attr("data-direction");t.classed("is-visible",!1),e.select("button").transition().duration(25).delay(100).ease(d3.easeLinear).style("transform","rotate(0deg)"),d.classed("not-chosen",!1).classed("cat-chosen",!1).transition().duration(250).delay(function(e,t){return 25*t}).ease(d3.easeLinear).style("transform","translate(0, 0)"),"back"===s&&d3.event.stopPropagation(),M(),b.style("pointer-events","all")}function j(){d.selectAll(".button-wrapper").on("click",function(){var e=d3.select(this),t=e.attr("data-direction");if(console.log({dir:t}),"back"===t)$(e);else if("forward"===t){var s=d3.select(this.parentNode);d3.event.stopPropagation(),B(s)}e.attr("data-direction","back"===t?"forward":"back")})}function B(e){console.log("catTap");var t=e.node(),l=e.classed("cat-chosen",!0),a=l.select(".button-wrapper p"),i=l.select(".button-wrapper button");a.classed("is-visible",!0);var n=d.filter(function(){return this!==t}).classed("not-chosen",!0),r=e.node().getBoundingClientRect();console.log({currCat:l,notCat:n}),n.transition().duration(250).delay(function(e,t){return 25*t}).ease(d3.easeLinear).style("transform","translate(-100%)"),l.transition().duration(250).delay(100).ease(d3.easeLinear).style("transform","translate(0, -".concat(r.top,"px)")),i.transition().duration(25).delay(100).ease(d3.easeLinear).style("transform","rotate(-180deg)"),i.attr("data-direction","back"),T(),s.default.filter(l.attr("data-cat")),b.style("pointer-events","none"),i.style("pointer-events","all")}function D(){k(),q(),_(),j(),r.on("click",T),c.on("click",M),o.on("click",N),g.on("click",S)}var E={init:D,resize:a};exports.default=E;
},{"./lyrics":"b9Lb","./utils/prepare-span":"qa0R","./categories":"MBJX"}],"lhDN":[function(require,module,exports) {
d3.selection.prototype.stackedBar=function(t){var n=this.nodes().map(function(t){var n=d3.select(t),e=n.datum(),r=0,a=d3.scaleLinear(),i={init:function(){n.selectAll(".year").data(e,function(t){return t.year}).join(function(t){var n=t.append("div").attr("class","year");return n.append("p").attr("class","year__number").text(function(t){return t.year}),n.append("div").attr("class","year__barCont"),n})},resize:function(){r=n.node().offsetWidth-50-0,n.node().offsetHeight;var t=d3.max(e,function(t){return t.total});return a.domain([0,t]).range([0,r]),i},render:function(){return n.selectAll(".year__barCont").selectAll(".bar").data(function(t){return t.censored}).join(function(t){return t.append("div").attr("class",function(t){return"bar bar--".concat(t.key)})}).style("width",function(t){return"".concat(a(t.value),"px")}).style("height","10px"),i},data:function(t){return arguments.length?(e=t,n.datum(e),i):e}};return i.init(),i});return n.length>1?n:n.pop()};
},{}],"JciQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./load-data"));function r(e){return e&&e.__esModule?e:{default:e}}function t(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function n(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(n,!0).forEach(function(r){o(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(n).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}require("./pudding-chart/proportion-chart");var c=d3.selectAll('[data-chart="bar"]'),i=c.selectAll(".chart"),a=[],u=[];function l(e){var r=e.censored.map(function(e){return e.value});return d3.sum(r)}function s(e){return e.map(function(e){return{year:+e.year,censored:d3.entries({alcohol:+e.alcohol,sexual:+e.sexual,profanity:+e.profanity,violence:+e.violence,identity:+e.identity,other:+e.other})}}).map(function(e){return n({},e,{total:l(e)})})}function f(){a.forEach(function(e){return e.resize().render()})}function p(){var e=d3.select(this).data([u]).stackedBar();e.resize().render(),a.push(e)}function d(){(0,e.default)("proportions.csv").then(function(e){u=s(e),i.each(p)}).catch(console.error)}var y={init:d,resize:f};exports.default=y;
},{"./load-data":"xZJw","./pudding-chart/proportion-chart":"lhDN"}],"PhzB":[function(require,module,exports) {
d3.selection.prototype.sparkLine=function(t){var a=this.nodes().map(function(t){var a=d3.select(t),e=null,n=null,r=null,s=a.datum(),c=0,i=0,l=(d3.scaleLinear(),d3.scaleLinear(),{init:function(){console.log(s),e=a.append("svg").attr("class","spark-chart"),n=e.append("g").attr("class","g-axis");var t=e.append("g");t.attr("transform","translate(".concat(0,", ").concat(0,")")),n.append("g").attr("class","x axis"),n.append("g").attr("class","y axis"),r=t.append("g").attr("class","g-vis"),l.resize(),l.render()},resize:function(){return c=a.node().offsetWidth-0-0,i=a.node().offsetHeight-0-0,e.attr("width",c+0+0).attr("height",i+0+0),r.selectAll(".cat-path").data(s).enter().append("path").attr("class","cat-path"),l},render:function(){return l},data:function(t){return arguments.length?(s=t,a.datum(s),l.render,l):s}});return l.init(),l});return a.length>1?a:a.pop()};
},{}],"UNiJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./load-data"));function r(e){return e&&e.__esModule?e:{default:e}}function t(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function n(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(n,!0).forEach(function(r){o(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(n).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}require("./pudding-chart/spark-chart");var c=d3.select("#spark-chart"),i=null,u=[];function a(e){var r=e.censored.map(function(e){return e.value});return d3.sum(r)}function l(e){return e.map(function(e){return{year:+e.year,censored:d3.entries({alcohol:+e.alcohol,sexual:+e.sexual,profanity:+e.profanity,violence:+e.violence,identity:+e.identity,other:+e.other})}}).map(function(e){return n({},e,{total:a(e)})})}function f(){}function s(e){i=c.datum(e).sparkLine()}function p(){(0,e.default)("proportions.csv").then(function(e){s(u=l(e))}).catch(console.error)}var d={init:p,resize:f};exports.default=d;
},{"./load-data":"xZJw","./pudding-chart/spark-chart":"PhzB"}],"epB2":[function(require,module,exports) {
"use strict";var e=l(require("lodash.debounce")),i=l(require("./utils/is-mobile")),r=l(require("./utils/link-fix")),t=l(require("./graphic")),u=l(require("./proportion")),d=l(require("./categories")),a=l(require("./spark"));function l(e){return e&&e.__esModule?e:{default:e}}var n=d3.select("body"),s=0;function f(){var e=n.node().offsetWidth;s!==e&&(s=e,t.default.resize(),u.default.resize())}function o(){(0,r.default)(),n.classed("is-mobile",i.default.any()),window.addEventListener("resize",(0,e.default)(f,150)),t.default.init(),u.default.init(),a.default.init(),d.default.init()}o();
},{"lodash.debounce":"or4r","./utils/is-mobile":"WEtf","./utils/link-fix":"U9xJ","./graphic":"TAPd","./proportion":"JciQ","./categories":"MBJX","./spark":"UNiJ"}]},{},["epB2"], null)